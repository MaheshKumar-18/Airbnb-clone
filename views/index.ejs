<style>
  .search-form{
    display:inline;
  }
</style>

<% layout("./layout/boilerplate.ejs")%>

<body class="index-body">

<div class="filters">
    <button class="filter-toggle btn btn-danger">Filters &nbsp;<i class="fa-solid fa-sort-down"></i></button>

  <div class="scrollable-filters">
    <div class="filter">
      <a href="/listing/trending"><div class="mt-3"><i class="fa-solid fa-fire"></i></div>
      <p>Trending</p></a>
    </div>

    <div class="filter">
      <a href="/listing/rooms"><div class="mt-3"><i class="fa-solid fa-bed"></i></div>
      <p>Rooms</p></a>
    </div>

    <div class="filter">
      <a href="/listing/iconic cities"><div class="mt-3"><i class="fa-solid fa-mountain-city"></i></div>
      <p>Iconic Cities</p></a>
    </div>

   <div class="filter">
       <a href="/listing/mountains"><div class="mt-3"><i class="fa-solid fa-mountain-sun"></i></div>
      <p>Mountains</p></a>
    </div>

    <div class="filter">
      <a href="/listing/castles"><div class="mt-3"><i class="fa-brands fa-fort-awesome"></i></div>
      <p>Castles</p></a>
    </div>

    <div class="filter">
      <a href="/listing/amazing pools"><div class="mt-3"><i class="fa-solid fa-person-swimming"></i></div>
      <p>Amazing pools</p></a>
    </div>

    <div class="filter">
      <a href="/listing/camping"> <div class="mt-3"><i class="fa-solid fa-campground"></i></div>
      <p>Camping</p></a>
    </div>

     <div class="filter">
      <a href="/listing/farms"><div class="mt-3"><i class="fa-solid fa-cow"></i></div>
      <p>Farms</p></a>
    </div>

     <div class="filter">
      <a href="/listing/arctic"><div class="mt-3"><i class="fa-solid fa-snowflake"></i></div>
      <p>Arctic</p></a>
    </div>
  
  </div>


  <div class="tax-toggle ms-auto me-auto">
    <div class="form-check form-switch form-check-reverse toggle">
    <input class="form-check-input" type="checkbox" id="switchCheckReverse">
    <label class="form-check-label" for="switchCheckReverse">Display total after taxes</label>
    </div>
  </div>

</div>


<div class="hidden-filters">
  <div class="filter">
    <a href="/listing/trending"><div class="mt-3"><i class="fa-solid fa-fire"></i></div>
    <p>Trending</p></a>
  </div>

  <div class="filter">
    <a href="/listing/rooms"><div class="mt-3"><i class="fa-solid fa-bed"></i></div>
    <p>Rooms</p></a>
  </div>

  <div class="filter">
    <a href="/listing/iconic cities"><div class="mt-3"><i class="fa-solid fa-mountain-city"></i></div>
    <p>Iconic Cities</p></a>
  </div>

  <div class="filter">
    <a href="/listing/mountains"><div class="mt-3"><i class="fa-solid fa-mountain-sun"></i></div>
    <p>Mountains</p></a>
  </div>

  <div class="filter">
    <a href="/listing/castles"><div class="mt-3"><i class="fa-brands fa-fort-awesome"></i></div>
    <p>Castles</p></a>
  </div>

  <div class="filter">
    <a href="/listing/amazing pools"><div class="mt-3"><i class="fa-solid fa-person-swimming"></i></div>
    <p>Amazing pools</p></a>
  </div>

  <div class="filter">
    <a href="/listing/camping"> <div class="mt-3"><i class="fa-solid fa-campground"></i></div>
    <p>Camping</p></a>
  </div>

  <div class="filter">
    <a href="/listing/farms"><div class="mt-3"><i class="fa-solid fa-cow"></i></div>
    <p>Farms</p></a>
  </div>

  <div class="filter">
    <a href="/listing/arctic"><div class="mt-3"><i class="fa-solid fa-snowflake"></i></div>
    <p>Arctic</p></a>
  </div>
</div>


<div class="box">
   
    <% for(detail of allListing){ %>

        <a href="/listing/<%= detail._id %>" class="listing-link">
          <div class="card index-card" style="width: 20rem; height: 350px;">
          <img src="<%=detail.image.url%>" class="card-img-top" alt="something">
          <div class="card-img-overlay"></div>
          <div class="card-body">
            <p class="card-text"><%= detail.title %><br>
              &#8377;
              <%= typeof detail.price === 'number' ? detail.price.toLocaleString("en-IN") : 'N/A' %> / night
              &nbsp; &nbsp;<i class="gst">+18% GST</i>
            </p> 
          </div>  
          </div> 
        </a>
    <% } %>
  </div>
</body>



<script>

    //  Display GST
     let switchCheckReverse = document.querySelector("#switchCheckReverse");
     switchCheckReverse.addEventListener("click",()=>{
     let gst = document.querySelectorAll(".gst");
        for(one of gst){
          if(one.style.display!="inline"){
            one.style.display="inline";
          }
          else{
            one.style.display="none";
          }    
        } 
        })


    // Filter Button Applicable for Mobile Only
     let filter_toggle=document.querySelector(".filter-toggle");
     let hidden_filters=document.querySelector(".hidden-filters");
     
     filter_toggle.addEventListener("click",()=>{
           if(hidden_filters.style.display!="flex"){
             hidden_filters.style.display="flex";    
           }
           else{
           hidden_filters.style.display="none";
           }
     })
</script>
